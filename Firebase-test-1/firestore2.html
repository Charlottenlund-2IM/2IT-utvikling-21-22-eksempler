<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.3/firebase-app.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
        import { getFirestore, collection, doc, addDoc, setDoc, getDoc, getDocs, query, where, orderBy, startAt, startAfter, endAt, limit, limitToLast } from "https://www.gstatic.com/firebasejs/9.6.3/firebase-firestore.js"

      
        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyB769kvK-RwVKxfPWKrnac6x6C3UwG58eU",
          authDomain: "elevliste.firebaseapp.com",
          projectId: "elevliste",
          storageBucket: "elevliste.appspot.com",
          messagingSenderId: "866578548801",
          appId: "1:866578548801:web:eb58367f7d47865d025ec0"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);

        const db = getFirestore();
/*
        addDoc(collection(db, "elever"), {
            fornavn: "Rebecca",
            etternavn: "Thomasen",
            telefon: "12345678"
        });
        addDoc(collection(db, "elever"), {
            fornavn: "Isa",
            etternavn: "Mo",
            telefon: "23456789",
            epost: "isamo@mo.no"
        });
        addDoc(collection(db, "elever"), {
            fornavn: "Jakob",
            etternavn: "Nilsen",
            epost: "jakob@nilsen.net"
        });
        addDoc(collection(db, "elever"), {
            fornavn: "Gabrielle",
            etternavn: "Martin",
            telefon: "45678901"
        });
*/
        await setDoc(doc(db, "elever", "thore"), {
            fornavn: "Rebecca",
            etternavn: "Thomasen",
            telefon: "12345678"
        });
        await setDoc(doc(db, "elever", "nilja"), {
            fornavn: "Jakob",
            etternavn: "Nilsen",
            epost: "jakob@nilsen.net"
        });
        await setDoc(doc(db, "elever", "moisa"), {
            fornavn: "Isa",
            etternavn: "Mo",
            epost: "isamo@mo.no",
            telefon: "23456789"
        });
        await setDoc(doc(db, "elever", "marga"), {
            fornavn: "Gabrielle",
            etternavn: "Martin",
            telefon: "45678901"
        });


        //console.log(await getDoc(doc(db, "elever", "nilja")).data());
        //const docRef = doc(db, "elever", "nilja");
        const docSnap = await getDoc(doc(db, "elever", "nilja"));
        //console.log("Document data:", docSnap.data());
        //console.log("ID:", docSnap.id); 
        //console.log("Navn:", docSnap.data().fornavn, docSnap.data().etternavn);

/*        if (docSnap.exists()) {
            console.log("Document data:", docSnap.data());
        } else {
            // doc.data() will be undefined in this case
            console.log("No such document!");
        }
*/

/*
const snapshot = await getDocs(collection(db, "elever"));
snapshot.forEach((doc) => {
  console.log(doc.data().fornavn, doc.data().etternavn);
});
*/


const querySnapshot = await getDocs(query(collection(db, "elever"), where("epost", "!=", "undefined")));
querySnapshot.forEach((doc) => {
  console.log(doc.data().fornavn, doc.data().etternavn, doc.data().epost);
});

      </script>
</body>
</html>